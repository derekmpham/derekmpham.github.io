<!DOCTYPE html>
<html lang="en">
<head>
	<title>Derek Pham - Welcome</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<style>
		html, body {
			background-color: #000;
			margin: 0px;
			padding: 0px;
			overflow: hidden;
		}
	</style>
</head>
<body>
	<div></div>
	<script src="js/three.js"></script>
	<script src="js/TrackballControls.js"></script>
	<script src="js/OBJLoader.js"></script>
	<script src="js/RGBELoader.js"></script>
	<script src="js/HDRCubeTextureLoader.js"></script>
	<script src="js/PMREMGenerator.js"></script>
	<script src="js/PMREMCubeUVPacker.js"></script>
	<script src="js/Detector.js"></script>
	<script src="js/stats.min.js"></script>
	<script>
		
		// check if browser supports webgl
		if (!Detector.webgl) {
			Detector.addGetWebGLMessage();
		}

		// set up global variables
		var statsEnabled = true;
		var container, stats, loader;
		var camera, scene, renderer;
		var controls;
		var mesh;
		var spotLight;

		init();
		animate();

		// set up scene
		function init() {

			container = document.createElement('div');
			document.body.appendChild(container);

			// create camera
			camera = new THREE.PerspectiveCamera(50, window.innerWidth/window.innerHeight, 0.01, 1000);
			camera.position.z = 2;
			// camera.position.y = 1;

			// add TrackballControls to enable camera rotation using mouse
			controls = new THREE.TrackballControls(camera);

			// create renderer, set background color, make responsive, and add to DOM
			renderer = new THREE.WebGLRenderer({antialias: true});
			renderer.setClearColor(0x202020);
			renderer.setPixelRatio(window.devicePixelRatio);
			renderer.setSize(window.innerWidth, window.innerHeight);
			container.appendChild(renderer.domElement);

			// assume texture images are gamma-corrected, apply standard tone mapping, and set tone mapping exposure
			renderer.gammaInput = true;
			renderer.gammaOutput = true;
			renderer.toneMapping = THREE.ReinhardToneMapping;
			renderer.toneMappingExposure = 3;


			// load textures of cube/skybox (divided into six sides)
			var textureCube = new THREE.CubeTextureLoader().setPath('models/park/').load(['px.jpg', 'nx.jpg', 'py.jpg', 'ny.jpg', 'pz.jpg', 'nz.jpg']);

			// create scene object and add cube/skybox into scene's background
			scene = new THREE.Scene();
			scene.background = textureCube;

			// add lights to scene
			scene.add(new THREE.HemisphereLight(0x443333, 0x222233, 4));

			// path to gun object models
			var path = 'models/obj/gun/';

			var loader = new THREE.OBJLoader();
			var material = new THREE.MeshStandardMaterial();
			// load main gun object and incorporate other gun models ("maps") as a function
			loader.load(path + 'gun.obj', function (group) {
				var loader = new THREE.TextureLoader();

				material.roughness = 1;
				material.metalness = 1;

				material.map = loader.load(path + 'gun_A.jpg');

				material.metalnessMap = material.roughnessMap = loader.load(path + 'gun_RM.jpg');
				material.normalMap = loader.load(path + 'gun_N.jpg');

				material.map.wrapS = THREE.RepeatWrapping;
				material.roughnessMap.wrapS = THREE.RepeatWrapping;
				material.metalnessMap.wrapS = THREE.RepeatWrapping;
				material.normalMap.wrapS = THREE.RepeatWrapping;

				group.traverse(function (child) {
					if (child instanceof THREE.Mesh) {
						child.material = material;
					}
				});

				group.position.x = -0.45;
				// group.position.y = -1;
				group.rotation.y = -Math.PI/2;
				scene.add(group);
			});

			// enable resizing
			window.addEventListener('resize', onWindowResize, false);
		}

		// resizing window
		function onWindowResize(event) {
			// update screen width and height
			SCREEN_WIDTH = window.innerWidth;
			SCREEN_HEIGHT = window.innerHeight;
			// update renderer size
			renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);
			// update camera's aspect ratio
			camera.aspect = SCREEN_WIDTH/SCREEN_HEIGHT;
			camera.updateProjectionMatrix();
		}

		// render scene and update render as needed
		function animate() {
			requestAnimationFrame(animate);
			controls.update();
			renderer.render(scene, camera);
		}

	</script>
		<a style="position:fixed;bottom:45px;text-align:center;color:#ffffff;font-family:Monospace;font-size:35px;width:100%;" href="https://www.linkedin.com/in/derekmpham/">ENTER</a>
</body>
</html>