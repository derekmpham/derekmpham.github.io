<!DOCTYPE html>
<html lang="en">
<head>
	<title>Star Wars Rebellion Blockade</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<style>
		html, body {
			background-color: #000;
			margin: 0px;
			padding: 0px;
			overflow: hidden;
		}
	</style>
</head>
<body>
	<script src="js/three.min.js"></script>
	<script src="js/OrbitControls.js"></script>
	<script>
		// set up global variables
		var scene, camera, renderer, skyboxMesh, textureCube;

		init();
		animate();

		// set up scene
		function init() {
			// test if webgl is supported
			if (!Detector.webgl) {
				Detector.addGetWebGLMessage();
			}

			// create scene and set scene size
			scene = new THREE.Scene();

			var WIDTH = window.innerWidth,
				HEIGHT = window.innerHeight;

			// create camera and add it to scene
			camera = new THREE.PerspectiveCamera(70, WIDTH/HEIGHT, 1, 100000);
			scene.add(camera);

			// load cube textures
			var urlPrefix = "models/";
			var urls = [urlPrefix + "front.jpg", urlPrefix + "back.jpg", urlPrefix + "left.jpg", urlPrefix + "right.jpg", urlPrefix + "up.jpg", urlPrefix + "down.jpg"];
			var loader = new THREE.CubeTextureLoader();
			textureCube = loader.load(urls, function (cubeTexture) {
				textureCube.format = THREE.RGBFormat;	
				// initialize shader

				var shader = THREE.ShaderLib["cube"];
				//var uniforms = THREE.UniformsUtils.clone(shader.uniforms);
				shader.uniforms['tCube'].texture = textureCube;
				//shader.uniforms = uniforms;
				var material = new THREE.ShaderMaterial({
					fragmentShader: shader.fragmentShader,
					vertexShader: shader.vertexShader,
					uniforms: shader.uniforms,
					depthWrite: false,
			        side: THREE.BackSide
				});

				// create cube
				// build skybox mesh
				//skyboxMesh = new THREE.Mesh(new THREE.BoxGeometry(100000, 100000, 100000), material);
				skyboxMesh = new THREE.Mesh(new THREE.CubeGeometry( 100000, 100000, 100000, 1, 1, 1, null, true ), material );
				// add cube to scene
				//skyboxMesh.position.set(0, 200, 0);
				scene.add(skyboxMesh);

				//skyboxMesh.position.copy(camera.position);
			}, function () { console.log("loading...");}, function(e) {console.log(e);});


			// create renderer and add to DOM
			renderer = new THREE.WebGLRenderer();
			//renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
			//renderer.setClearColor( 0x00ff00, 0.5);
			renderer.setSize(window.innerWidth, window.innerHeight);
			document.body.appendChild(renderer.domElement);

			// create event listener that resizes renderer with browser window
			//window.addEventListener('resize', function() {
			//	var WIDTH = window.innerWidth,
			//		HEIGHT = window.innerHeight;
			//	renderer.setSize(WIDTH, HEIGHT);
			//	camera.aspect = WIDTH/HEIGHT;
			//	camera.updateProjectionMatrix();
			//});

			//scene.background = new THREE.Color( 0xffffff );

			// add orbit controls so that we can pan around with mouse
			//controls = new THREE.OrbitControls(camera, renderer.domElement);
		}

		// renders scene and updates render as needed
		function animate() {
			render();
			requestAnimationFrame(animate);

			// render scene
			// renderer.render(scene, camera);
			//controls.update();
		}

		function render() {
			var timer = - new Date().getTime() * 0.0002; 
			camera.position.x = 1000 * Math.cos( timer );
			camera.position.z = 1000 * Math.sin( timer );
			renderer.render( scene, camera );
			//console.log("rendering");
		}
	</script>
		<a style="position:fixed;bottom:45px;text-align:center;color:#ffffff;font-family:Monospace;font-size:35px;width:100%;" href="https://www.linkedin.com/in/derekmpham/">ENTER</a>
</body>
</html>